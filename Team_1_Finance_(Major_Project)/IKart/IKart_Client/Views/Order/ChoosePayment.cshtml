@{
                Layout = "~/Views/Shared/_UserLayout.cshtml";

                ViewBag.Title = "Choose Payment Option";

                var cards = ViewBag.Cards as IEnumerable<dynamic>;

                var productId = ViewBag.ProductId;

                var addressId = ViewBag.AddressId;

}

<div class="container mt-4">
    <h2 class="page-title mb-4">Choose Payment Option</h2>

    <form id="choosePaymentForm" method="post" action="/Order/PlaceOrder">
        <input type="hidden" name="productId" value="@productId" />
        <input type="hidden" name="addressId" value="@addressId" />

        <div class="card p-3 shadow-sm mb-3">
            <div class="form-check">
                <input class="form-check-input" type="radio" name="method" value="Razorpay" id="razorpay" checked />
                <label class="form-check-label payment-option-label" for="razorpay">Razorpay</label>
            </div>

            <div class="form-check">
                <input class="form-check-input" type="radio" name="method" value="Card" id="ikartCard" />
                <label class="form-check-label payment-option-label" for="ikartCard">IKart EMI Card</label>
            </div>

            @*<div class="form-check">
                    <input class="form-check-input" type="radio" name="method" value="CreditCard" id="creditCard" />
                    <label class="form-check-label payment-option-label" for="creditCard">Credit Card</label>
                </div>

                <div class="form-check">
                    <input class="form-check-input" type="radio" name="method" value="DebitCard" id="debitCard" />
                    <label class="form-check-label payment-option-label" for="debitCard">Debit Card</label>
                </div>

                <div class="form-check">
                    <input class="form-check-input" type="radio" name="method" value="UPI" id="upi" />
                    <label class="form-check-label payment-option-label" for="upi">UPI</label>
                </div>*@
        </div>

        <div id="emiCardSection" class="card p-3 shadow-sm mb-3" style="display:none;">
            <div class="mb-3">
                <label class="form-label">Select IKart EMI Card:</label>
                <select name="emiCardId" class="form-select">
                    <option value="">Select IKart Card</option>

                    @if (cards != null)

                    {

                        foreach (var card in cards)

                        {
        <option value="@card.EmiCardId">@card.CardType - Balance ₹@card.Balance</option>}

                    }
                </select>
            </div>

            <div>
                <label class="form-label">Choose Tenure (months):</label>
                <select name="tenureMonths" class="form-select">
                    <option value="3">3</option>
                    <option value="6">6</option>
                    <option value="9">9</option>
                    <option value="12">12</option>
                </select>
            </div>
        </div>

        <div class="d-flex justify-content-center gap-3">
            <button type="submit" class="btn btn-theme btn-lg">Proceed to Pay</button>
        </div>
    </form>

</div>

<style>

    .page-title {
        color: #1e3a8a;
        font-weight: 600;
        border-left: 5px solid #1e3a8a;
        padding-left: 10px;
    }

    .btn-theme {
        background-color: #1e3a8a;
        border-color: #1e3a8a;
        color: #fff;
    }

        .btn-theme:hover {
            background-color: #16307c;
            border-color: #16307c;
            color: #fff;
        }

    .payment-option-label {
        font-size: 1.2rem;
        font-weight: 500;
        color: #1e3a8a;
        margin-left: 5px;
    }

    .form-check-input {
        transform: scale(1.3);
        margin-top: 3px;
    }
</style>

<script>

    document.querySelectorAll('input[name="method"]').forEach(function (radio) {

        radio.addEventListener('change', function () {

            document.getElementById('emiCardSection').style.display = this.value === "Card" ? "block" : "none";

        });

    });
</script>

