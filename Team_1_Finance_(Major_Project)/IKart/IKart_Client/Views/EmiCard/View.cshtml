﻿@model IKart_Shared.DTOs.Admin.EmiCardDto

@{ ViewBag.Title = "EMI Card Details";

    Layout = "~/Views/Shared/_AdminLayout.cshtml"; }

<div class="container mt-5">
    <div class="card shadow-lg border-0 rounded-3">
        <div class="card-header bg-dark text-white d-flex justify-content-between align-items-center">
            <h4 class="mb-0"><i class="fa fa-credit-card me-2"></i> EMI Card Details</h4>
            <a href="@Url.Action("Index", "EmiCard")" class="btn btn-light btn-sm">
                <i class="fa fa-arrow-left me-1"></i> Back
            </a>
        </div>

        <div class="card-body">
            <dl class="row mb-0">
                <dt class="col-sm-3 fw-bold text-secondary"><i class="fa fa-id-card me-2"></i> Card ID</dt>
                <dd class="col-sm-9">@Model.CardId</dd>

                <dt class="col-sm-3 fw-bold text-secondary"><i class="fa fa-user me-2"></i> User Name</dt>
                <dd class="col-sm-9">@Model.UserName</dd>

                <dt class="col-sm-3 fw-bold text-secondary"><i class="fa fa-envelope me-2"></i> Email</dt>
                <dd class="col-sm-9">@Model.Email</dd>

                <dt class="col-sm-3 fw-bold text-secondary"><i class="fa fa-money-bill me-2"></i> Fee Paid</dt>
                <dd class="col-sm-9">₹@Model.FeeAmount.ToString("N2")</dd>

                <dt class="col-sm-3 fw-bold text-secondary"><i class="fa fa-wallet me-2"></i> Fee Status</dt>
                <dd class="col-sm-9">
                    <span class="badge rounded-pill @(Model.FeeStatus == "Paid" ? "bg-success" : "bg-danger")">

                        @Model.FeeStatus
                    </span>
                </dd>

                <dt class="col-sm-3 fw-bold text-secondary"><i class="fa fa-check-circle me-2"></i> Approval Status</dt>
                <dd class="col-sm-9">
                    <span class="badge rounded-pill @(Model.ApprovalStatus == "Approved" ? "bg-success" : "bg-warning text-dark")">

                        @Model.ApprovalStatus
                    </span>
                </dd>
            </dl>
        </div>
    </div>

    <div class="card shadow-sm border-0 rounded-3 mt-4">
        <div class="card-header bg-light fw-bold">
            <i class="fa fa-file-alt me-2"></i> Documents
        </div>
        <div class="card-body">
            <div class="form-group mb-3">
                <label for="docSelect" class="fw-semibold">Select Document</label>
                <select id="docSelect" class="form-select">
                    <option value="">-- Select Document --</option>

                    @foreach (var doc in Model.Documents)

                    {
        <option value="@Url.Content(doc.FilePath)">

            @doc.DocumentType (@doc.FileName)
        </option>
}
                </select>
            </div>

            <div class="mt-3">
                <iframe id="docViewer" src="" class="w-100 rounded border" style="height:600px;" hidden></iframe>
            </div>
        </div>
    </div>
</div>

<script>

    document.getElementById("docSelect").addEventListener("change", function () {

        var path = this.value;

        var viewer = document.getElementById("docViewer");

        if (path) {

            viewer.src = path;

            viewer.hidden = false;

        } else {

            viewer.src = "";

            viewer.hidden = true;

        }

    });
</script>
